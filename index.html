<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>RanKaiNam - Menu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
</head>
<body class="bg-[#121212] font-['Kanit'] text-white max-w-md mx-auto min-h-screen">
    <header class="p-5 flex justify-between items-center bg-[#121212]/90 sticky top-0 z-50">
        <h1 class="text-xl font-bold">RanKaiNam</h1>
        <a href="admin.html" class="material-symbols-outlined text-gray-500">settings</a>
    </header>
    <main class="p-4 grid grid-cols-2 gap-4 pb-32" id="menu-grid"></main>
    <div class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-40">
        <a href="basket.html" class="bg-[#48C9B0] p-4 rounded-full flex justify-between items-center text-black font-bold shadow-xl">
            <span>ตะกร้าสินค้า <span id="cart-count" class="bg-black/10 px-2 rounded-full">0</span></span>
            <span id="cart-total">฿ 0.00</span>
        </a>
    </div>
    <script>
        function loadMenus() {
            const menus = JSON.parse(localStorage.getItem('myMenus')) || [];
            document.getElementById('menu-grid').innerHTML = menus.map(m => `
                <div class="bg-white/5 p-3 rounded-2xl border border-white/5">
                    <img src="${m.image}" class="rounded-xl w-full aspect-square object-cover mb-2">
                    <h3 class="font-bold text-sm">${m.name}</h3>
                    <div class="flex justify-between items-center mt-2">
                        <span class="text-[#48C9B0] font-bold">฿${m.price}</span>
                        <button onclick="add('${m.name}', ${m.price}, '${m.image}')" class="bg-[#48C9B0] text-black rounded-full w-8 h-8 font-bold">+</button>
                    </div>
                </div>`).join('');
            updateUI();
        }
        function add(n, p, i) {
            let cart = JSON.parse(localStorage.getItem('cartData')) || [];
            let f = cart.find(x => x.name === n);
            if(f) f.qty++; else cart.push({name:n, price:p, image:i, qty:1});
            localStorage.setItem('cartData', JSON.stringify(cart));
            updateUI();
        }
        function updateUI() {
            let cart = JSON.parse(localStorage.getItem('cartData')) || [];
            document.getElementById('cart-count').innerText = cart.reduce((s,x)=>s+x.qty, 0);
            document.getElementById('cart-total').innerText = '฿ ' + cart.reduce((s,x)=>s+(x.price*x.qty), 0).toLocaleString();
        }
        loadMenus();
    </script>
</body>
</html>