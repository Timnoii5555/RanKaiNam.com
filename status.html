<!DOCTYPE html>
<html class="dark" lang="th">
<head>
    <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>สถานะ - RanKaiNam</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#121212] font-['Kanit'] text-white max-w-md mx-auto min-h-screen flex flex-col border-x border-white/5">
    <header class="p-6 flex justify-between items-center bg-[#121212]/90 sticky top-0 z-50">
        <a href="index.html" class="material-symbols-outlined">home</a>
        <h1 id="order-id-header" class="text-lg font-bold">Order #---</h1>
        <div id="bell-box" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center relative">
            <span id="bell-icon" class="material-symbols-outlined text-gray-500 transition-all duration-500">notifications</span>
            <span id="bell-dot" class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full hidden"></span>
        </div>
    </header>
    <main class="p-6 flex-1 space-y-8 text-center">
        <div class="bg-white/5 p-8 rounded-3xl border border-white/10">
            <div id="status-icon" class="w-16 h-16 bg-[#48C9B0]/20 rounded-full flex items-center justify-center mx-auto mb-4 text-[#48C9B0]">
                <span id="icon-inner" class="material-symbols-outlined text-4xl animate-spin">cyclone</span>
            </div>
            <h2 id="status-title" class="text-xl font-bold mb-1">กำลังเตรียมออเดอร์</h2>
            <p id="status-desc" class="text-xs text-gray-500">ห้องครัวกำลังปั่นเมนูของคุณอย่างตั้งใจ</p>
        </div>
        <div id="items-list" class="space-y-3 text-left"></div>
    </main>
    <div id="alert-popup" class="fixed bottom-10 left-1/2 -translate-x-1/2 w-[85%] bg-[#48C9B0] text-black p-4 rounded-2xl font-bold shadow-2xl flex items-center gap-3 translate-y-[200%] transition-all duration-700">
        <span class="material-symbols-outlined">check_circle</span>
        <span>ออเดอร์ของคุณเสร็จสิ้นแล้ว!</span>
    </div>
    <script>
        function checkStatus() {
            const current = JSON.parse(localStorage.getItem('currentOrder'));
            if (!current) return;
            document.getElementById('order-id-header').innerText = "Order " + current.id;
            document.getElementById('items-list').innerHTML = current.items.map(it => `
                <div class="bg-white/5 p-4 rounded-2xl flex justify-between border border-white/5 text-sm">
                    <span class="font-bold">${it.qty}x ${it.name}</span>
                    <span class="text-[#48C9B0]">฿${(it.price * it.qty).toLocaleString()}</span>
                </div>
            `).join('');
            const timer = setInterval(() => {
                const doneOrders = JSON.parse(localStorage.getItem('completedOrders')) || [];
                if (doneOrders.some(o => o.id === current.id)) {
                    document.getElementById('status-title').innerText = "เสร็จแล้ว!";
                    document.getElementById('icon-inner').classList.remove('animate-spin');
                    document.getElementById('icon-inner').innerText = "check_circle";
                    document.getElementById('bell-icon').classList.replace('text-gray-500', 'text-green-500');
                    document.getElementById('bell-dot').classList.remove('hidden');
                    document.getElementById('alert-popup').style.transform = "translateY(0) translateX(-50%)";
                    clearInterval(timer);
                }
            }, 2000);
        }
        checkStatus();
    </script>
</body>
</html>